(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[568],{3435:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return K}});var r=n(9008),s=n(7294),a=n(29),o=n(7191),i=n(7794),u=n.n(i),c=n(7516);function l(e){var t=null===e||void 0===e?void 0:e.toBase58();return(null===t||void 0===t?void 0:t.slice(0,4))+".."+(null===t||void 0===t?void 0:t.slice(-4))}var p=n(4758),m=JSON.parse('{"version":"0.1.0","name":"so_lingo","instructions":[{"name":"initializeProgramInfo","accounts":[{"name":"admin","isMut":true,"isSigner":true},{"name":"programInfo","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"postQuestion","accounts":[{"name":"author","isMut":true,"isSigner":true},{"name":"question","isMut":true,"isSigner":false},{"name":"programInfo","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"title","type":"string"},{"name":"description","type":"string"},{"name":"tags","type":"string"}]},{"name":"postReply","accounts":[{"name":"author","isMut":true,"isSigner":true},{"name":"reply","isMut":true,"isSigner":false},{"name":"question","isMut":true,"isSigner":false},{"name":"programInfo","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"description","type":"string"}]},{"name":"upvoteQuestion","accounts":[{"name":"author","isMut":false,"isSigner":true},{"name":"question","isMut":true,"isSigner":false}],"args":[]},{"name":"downvoteQuestion","accounts":[{"name":"author","isMut":false,"isSigner":true},{"name":"question","isMut":true,"isSigner":false}],"args":[]},{"name":"upvoteReply","accounts":[{"name":"author","isMut":true,"isSigner":true},{"name":"reply","isMut":true,"isSigner":false},{"name":"question","isMut":true,"isSigner":false}],"args":[]},{"name":"downVoteReply","accounts":[{"name":"author","isMut":true,"isSigner":true},{"name":"reply","isMut":true,"isSigner":false},{"name":"question","isMut":true,"isSigner":false}],"args":[]}],"accounts":[{"name":"QuestionProgramInfo","type":{"kind":"struct","fields":[{"name":"author","type":"publicKey"},{"name":"bump","type":"u8"},{"name":"questionsCount","type":"u32"}]}},{"name":"Question","type":{"kind":"struct","fields":[{"name":"bump","type":"u8"},{"name":"author","type":"publicKey"},{"name":"title","type":"string"},{"name":"description","type":"string"},{"name":"upVotes","type":"u32"},{"name":"tags","type":"string"},{"name":"repliesCount","type":"u32"},{"name":"dateCreated","type":"i64"},{"name":"isAnswered","type":"bool"},{"name":"questionNum","type":"u32"}]}},{"name":"Reply","type":{"kind":"struct","fields":[{"name":"bump","type":"u8"},{"name":"author","type":"publicKey"},{"name":"description","type":"string"},{"name":"upVotes","type":"u32"},{"name":"dateCreated","type":"i64"},{"name":"correctAnswer","type":"bool"},{"name":"questionNum","type":"u32"},{"name":"replyNum","type":"u32"}]}}],"types":[{"name":"ReplyErrors","type":{"kind":"enum","variants":[{"name":"DescriptionTooLong"}]}}],"errors":[{"code":6000,"name":"TagsTooLong","msg":"The provided tags string should be 50 characters long maximum."},{"code":6001,"name":"TitleTooLong","msg":"The provided title string should be 100 characters long maximum."},{"code":6002,"name":"DescriptionTooLong","msg":"The provided description string should be 200 characters long maximum."}],"metadata":{"address":"3eDAYviWGBPe2MugFvjWekFhnwGJc4S82KTt3azLDeRZ"}}');function d(e){var t=JSON.stringify(m),n=JSON.parse(t);return new p.$r(n,m.metadata.address,e)}var f=n(2224),g=n(6835),h=n(3370),x=n(8764).Buffer,y=function(e){var t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e),x.from(t)};function v(e,t){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)(u().mark((function e(t,n){var r,s,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.rV.PublicKey.findProgramAddress([(0,h.cv)("question"),y(n)],t.programId);case 2:return r=e.sent,s=(0,g.Z)(r,2),a=s[0],s[1],e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=(0,a.Z)(u().mark((function e(t,n){var r,s,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d(t),e.next=3,v(r,n);case 3:return s=e.sent,e.next=6,r.account.question.fetch(s);case 6:if(a=e.sent,console.log(a),!t){e.next=18;break}return e.next=11,r.methods.upvoteQuestion().accounts({question:s,author:t.wallet.publicKey}).rpc();case 11:return e.t0=console,e.next=14,r.account.question.fetch(s);case 14:e.t1=e.sent,e.t0.log.call(e.t0,e.t1),e.next=21;break;case 18:return console.log("error","Wallet not connected!"),(0,f.h)({type:"error",message:"error",description:"Wallet not connected!"}),e.abrupt("return");case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return k.apply(this,arguments)}function k(){return(k=(0,a.Z)(u().mark((function e(t,n){var r,s,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d(t),e.next=3,v(r,n);case 3:return s=e.sent,e.next=6,r.account.question.fetch(s);case 6:if(a=e.sent,console.log(a),!t){e.next=18;break}return e.next=11,r.methods.downvoteQuestion().accounts({question:s,author:t.wallet.publicKey}).rpc();case 11:return e.t0=console,e.next=14,r.account.question.fetch(s);case 14:e.t1=e.sent,e.t0.log.call(e.t0,e.t1),e.next=21;break;case 18:return console.log("error","Wallet not connected!"),(0,f.h)({type:"error",message:"error",description:"Wallet not connected!"}),e.abrupt("return");case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=n(5893),q=function(e){var t,n,r,s=e.provider,o=e.questionData;return(0,j.jsx)("div",{children:(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:"flex items-start",children:[(0,j.jsx)("div",{className:"row-2",children:(0,j.jsx)("span",{className:"inline-flex justify-center items-center w-6 h-6 rounded text-white font-medium text-sm",children:(0,j.jsx)("svg",{className:"hover:fill-[#14F195] ",width:"32",height:"32",viewBox:"0 0 32 32",onClick:function(){(function(e,t){return b.apply(this,arguments)})(s,o.questionNum).then()},xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsx)("path",{d:"M16 0c8.836 0 16 7.164 16 16s-7.164 16 -16 16S0 24.836 0 16 7.164 0 16 0zm8.706 19.516H10.34l-2.838 2.814H21.66l2.838 -2.816zm-3.046 -5.292H7.294l-0.068 0.008l2.84 2.816 0.07 0.06c0.1 0.07 0.22 0.11 0.344 0.11h14.366l0.068 -0.008l-2.84 -2.816 -0.07 -0.06zM24.706 9H10.34l-2.838 2.816H21.66l2.838 -2.814z"})})})}),(0,j.jsx)("p",{className:"ml-4 md:ml-6",children:o.title})]}),(0,j.jsxs)("div",{className:"flex items-start",children:[(0,j.jsx)("div",{children:(0,j.jsx)("span",{className:"inline-flex justify-center items-center w-6 h-6 rounded bg-gray-200 text-gray-800 font-medium text-sm",children:(0,j.jsx)(c.PYY,{onClick:(0,a.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(s,o.questionNum);case 2:case"end":return e.stop()}}),e)})))})})}),(0,j.jsx)("p",{className:"ml-4 md:ml-6 text-gray-800",children:(n=o.description,r=200,(null===n||void 0===n?void 0:n.slice(0,r))+"...")})]}),(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-4 md:flex md:items-center mt-5 md:ml-12",children:[(0,j.jsxs)("div",{className:"flex md:items-center bg-gray-100 hover:bg-gray-200 rounded-lg px-3 py-2 cursor-pointer group",children:[(0,j.jsx)(c.FSy,{className:"mr-2"}),(0,j.jsx)("span",{className:"text-sm text-gray-800",children:"".concat(o.repliesCount," comments")})]}),(0,j.jsx)("div",{className:"flex md:items-center bg-gray-100 hover:bg-gray-200 rounded-lg px-3 py-2 cursor-pointer group",children:(0,j.jsx)("span",{className:"text-sm text-gray-800",children:"".concat(o.upVotes," upvotes")})}),(0,j.jsxs)("div",{className:"flex items-center md:ml-4",children:[(0,j.jsx)("div",{className:"mr-2 w-6 h-6 overflow-hidden shadow rounded-full border-gray-500",children:(0,j.jsx)("div",{className:"w-full h-full bg-gray-200"})}),(0,j.jsx)("span",{className:"text-sm text-gray-800 font-bold",children:"By ".concat(l(o.author))}),(0,j.jsxs)("span",{className:"hidden md:inline-block ml-10",children:["- ","Created on ".concat((t=o.dateCreated,new Date(1e3*t).toLocaleDateString("en-US").toString()))]})]})]})]})})};function N(e){return M.apply(this,arguments)}function M(){return(M=(0,a.Z)(u().mark((function e(t){var n,r,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.rV.PublicKey.findProgramAddress([(0,h.cv)("question_program_info")],t.programId);case 2:return n=e.sent,r=(0,g.Z)(n,2),s=r[0],r[1],e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return P.apply(this,arguments)}function P(){return(P=(0,a.Z)(u().mark((function e(t,n){var r,s,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d(t),e.next=3,N(r);case 3:return s=e.sent,e.next=6,r.account.questionProgramInfo.fetch(s);case 6:return a=e.sent,e.next=9,v(r,a.questionsCount);case 9:if(o=e.sent,!t){e.next=21;break}return e.next=13,r.methods.postQuestion(n.title,n.description,n.tags).accounts({question:o,programInfo:s,author:t.wallet.publicKey}).rpc();case 13:return e.t0=console,e.next=16,r.account.question.fetch(o);case 16:return e.t1=e.sent,e.t0.log.call(e.t0,e.t1),e.abrupt("return",r.account.question.fetch(o));case 21:return console.log("error","Wallet not connected!"),(0,f.h)({type:"error",message:"error",description:"Wallet not connected!"}),e.abrupt("return");case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=n(8155),Z="processed";var T=n(6938);function W(e,t,n){return I.apply(this,arguments)}function I(){return I=(0,a.Z)(u().mark((function e(t,n,r){var s,o,i,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=4;break}return(0,f.h)({type:"error",message:"error",description:"Wallet not connected!"}),e.abrupt("return",{err:!0});case 4:for(s=d(t),o=[],i=n;i<=r;i++)o.push(i);return e.next=9,Promise.all(o.map(function(){var e=(0,a.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(s,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return c=e.sent,e.next=12,s.account.question.fetchMultiple(c);case 12:return l=e.sent,e.abrupt("return",{err:!1,data:l});case 16:return e.prev=16,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{err:!0});case 20:case"end":return e.stop()}}),e,null,[[0,16]])}))),I.apply(this,arguments)}var D=function(e){(0,o.Z)(e);var t=(0,s.useState)([]),n=t[0],r=t[1],i=(0,s.useRef)(),c=(0,s.useRef)(0),l=(0,s.useRef)(0),m=(0,s.useState)(1),g=(m[0],m[1]),h=function(e){if(!e)return console.log("error","Wallet not connected!"),void(0,f.h)({type:"error",message:"error",description:"Wallet not connected!"});var t=new _.Connection("https://api.devnet.solana.com",Z);return new p.Y7(t,e,{preflightCommitment:Z}),new p.Y7(t,e,{preflightCommitment:Z})}((0,T.Os)()),x=function(){var e=(0,a.Z)(u().mark((function e(){var t,n,s,a,o,p,m,x;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,g(1),i.current){e.next=14;break}return t=d(h),e.next=6,N(t);case 6:return n=e.sent,e.next=9,t.account.questionProgramInfo.fetch(n);case 9:if(s=e.sent){e.next=13;break}return g(0),e.abrupt("return",(0,f.h)({type:"error",message:"error",description:"Something went wrong! please try again later"}));case 13:i.current=s;case 14:a=8,o=[];case 16:if(!(i.current.questionsCount>l.current&&o.length<a)){e.next=34;break}return p=c.current,(m=p+a-o.length-1)>i.current.questionsCount-1&&(m=i.current.questionsCount-1),console.log(i.current.questionsCount,l.current),e.next=23,W(h,p,m);case 23:if(!(x=e.sent).err){e.next=27;break}return g(0),e.abrupt("return",(0,f.h)({type:"error",message:"error",description:"Something went wrong! please try again later"}));case 27:o=x.data,l.current+=x.data.length,c.current+=o.length,console.log(x),r(x.data),e.next=16;break;case 34:i.current.questionsCount===l.current?g(-1):g(0),e.next=42;break;case 37:return e.prev=37,e.t0=e.catch(0),console.log(e.t0),g(0),e.abrupt("return",(0,f.h)({type:"error",message:"error",description:"Something went wrong! please try again later"}));case 42:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){x().then()}),[]);var y={title:"What is the best way to get started with Solana?",description:"I am new to Solana and I would like to get started with it. What is the best way to get started with Solana?",tags:"solana,anchor,newbie"};return(0,j.jsxs)("div",{className:"mx-40 my-40 w-auto p-5 bg-white rounded-lg shadow text-black grid space-y-8",children:[n.length>0&&n.map((function(e,t){return(0,j.jsx)("div",{children:(0,j.jsx)(q,{provider:h,questionData:e})},t)})),(0,j.jsx)("button",{onClick:(0,a.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(h,y);case 2:case"end":return e.stop()}}),e)}))),children:"post new question"})]})},K=function(e){var t=(0,s.useState)(1),n=(t[0],t[1],(0,s.useState)(!1));n[0],n[1];return(0,j.jsxs)("div",{children:[(0,j.jsxs)(r.default,{children:[(0,j.jsx)("title",{children:"Forum"}),(0,j.jsx)("meta",{name:"description",content:"Quest Topic"})]}),(0,j.jsx)(D,{})]})}},3697:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/forum",function(){return n(3435)}])}},function(e){e.O(0,[655,874,17,597,774,888,179],(function(){return t=3697,e(e.s=t);var t}));var t=e.O();_N_E=t}]);